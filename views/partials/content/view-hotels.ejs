<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hotel List</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
</head>
<body>

  <div class="container-fluid">
    <h2 class="my-4 d-flex justify-content-between align-items-center">
      Hotel List
      <a href="/dashboard?section=add-hotel" class="btn btn-primary">
        <i class="fas fa-plus"></i> Add Hotel
      </a>
    </h2>

    <!-- 🔍 Search Form -->
    <form action="/dashboard" method="GET" class="mb-3 d-flex" style="gap: 10px;">
      <input type="hidden" name="section" value="view-hotels" />
      <input
        type="text"
        name="search"
        class="form-control"
        placeholder="Search by hotel name or address"
        value="<%= typeof search !== 'undefined' ? search : '' %>"
      />
      <button type="submit" class="btn btn-outline-primary">
        <i class="fas fa-search"></i>
      </button>
    </form>

    <% if (typeof hotels !== 'undefined' && hotels.length === 0) { %>
      <div class="alert alert-warning">No hotels found.</div>
    <% } else if (hotels && hotels.length > 0) { %>
      <div class="table-responsive">
        <table class="table table-bordered align-middle">
          <thead>
            <tr>
              <th>Sr.No</th>
              <th>Hotel Name</th>
              <th>Address</th>
              <th>Email</th>
              <th>Contact</th>
              <th>City</th>
              <th>Reviewcount</th>
              <th>Amenities</th>
              <th>Area</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% hotels.forEach((hotel, index) => { %>
              <tr>
                <td><%= index + 1 %></td>
                <td><%= hotel.hotel_name %></td>
                <td><%= hotel.hotel_address %></td>
                <td><%= hotel.hotel_email %></td>
                <td><%= hotel.contact %></td>
                <td><%= hotel.city_name %></td>
                <td><%= hotel.reviewcount %></td>
                <td>
                  <% if (hotel.amenities && hotel.amenities.length > 0) { %>
                    <%= hotel.amenities.join(', ') %>
                  <% } else { %>
                    No amenities listed
                  <% } %>
                </td>
                <td><%= hotel.area_name %></td>
                <td class="d-flex gap-2">
                  <a href="/dashboard?section=edit-hotel&id=<%= hotel.hotel_id %>" class="btn btn-sm btn-warning">
                    <i class="fas fa-edit"></i>
                  </a>
                  <form action="/admin/delete-hotel/<%= hotel.hotel_id %>" method="POST"
                        onsubmit="return confirm('Are you sure you want to delete this hotel?');">
                    <button type="submit" class="btn btn-sm btn-danger">
                      <i class="fas fa-trash-alt"></i>
                    </button>
                  </form>
                </td>
              </tr>
            <% }); %>
          </tbody>
        </table>
      </div>
    <% } else { %>
      <div class="alert alert-info">Loading hotels...</div>
    <% } %>
  </div>

</body>
</html>
